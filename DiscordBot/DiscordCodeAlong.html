
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Discord Code-Along Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="DiscordChallenges.html" />
    
    
    <link rel="prev" href="StudentDesc.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../ReplSetup.html">
            
                <a href="../ReplSetup.html">
            
                    
                    Repl Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../HelloPython/StudentDesc.html">
            
                <a href="../HelloPython/StudentDesc.html">
            
                    
                    Week 1 - Hello Python
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../HelloPython/TurtleCodeAlong.html">
            
                <a href="../HelloPython/TurtleCodeAlong.html">
            
                    
                    Turtle Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../HelloPython/TurtleChallenges.html">
            
                <a href="../HelloPython/TurtleChallenges.html">
            
                    
                    Turtle Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../BasicProgramming/StudentDesc.html">
            
                <a href="../BasicProgramming/StudentDesc.html">
            
                    
                    Week 2 - Basic Programming
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../BasicProgramming/RPSCodeAlong.html">
            
                <a href="../BasicProgramming/RPSCodeAlong.html">
            
                    
                    Rock Paper Scissors Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../BasicProgramming/RPSChallenges.html">
            
                <a href="../BasicProgramming/RPSChallenges.html">
            
                    
                    Rock Paper Scissors Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../Collections/StudentDesc.html">
            
                <a href="../Collections/StudentDesc.html">
            
                    
                    Week 3 - Collections
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../Collections/PlaylistWarmup.html">
            
                <a href="../Collections/PlaylistWarmup.html">
            
                    
                    Playlist Warm-up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../Collections/ScoreSortCodeAlong.html">
            
                <a href="../Collections/ScoreSortCodeAlong.html">
            
                    
                    Sort By Score Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../Collections/ScoreSortChallenges.html">
            
                <a href="../Collections/ScoreSortChallenges.html">
            
                    
                    Sort By Score Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="StudentDesc.html">
            
                <a href="StudentDesc.html">
            
                    
                    Week 4 - Discord Bot
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="DiscordCodeAlong.html">
            
                <a href="DiscordCodeAlong.html">
            
                    
                    Discord Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="DiscordChallenges.html">
            
                <a href="DiscordChallenges.html">
            
                    
                    Discord Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../WebScraping/StudentDesc.html">
            
                <a href="../WebScraping/StudentDesc.html">
            
                    
                    Week 5 - Web Scraping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../WebScraping/HtmlReviewWarmup.html">
            
                <a href="../WebScraping/HtmlReviewWarmup.html">
            
                    
                    HTML Review Warm-up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../WebScraping/InfoFinderCodeAlong.html">
            
                <a href="../WebScraping/InfoFinderCodeAlong.html">
            
                    
                    Info Finder Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../WebScraping/InfoFinderChallenges.html">
            
                <a href="../WebScraping/InfoFinderChallenges.html">
            
                    
                    Info Finder Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../Flask/StudentDesc.html">
            
                <a href="../Flask/StudentDesc.html">
            
                    
                    Week 6 - Flask Web Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../Flask/FlaskBasics.html">
            
                <a href="../Flask/FlaskBasics.html">
            
                    
                    Flask Basics Warm-up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../Flask/FlaskCodeAlong.html">
            
                <a href="../Flask/FlaskCodeAlong.html">
            
                    
                    Random Joke Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../Flask/FlaskChallenges.html">
            
                <a href="../Flask/FlaskChallenges.html">
            
                    
                    Flask Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../PyGame/StudentDesc.html">
            
                <a href="../PyGame/StudentDesc.html">
            
                    
                    Week 7 - Pygame
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../PyGame/PygameWarmup.html">
            
                <a href="../PyGame/PygameWarmup.html">
            
                    
                    Pygame Warm-up
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../PyGame/TopDownCodeAlong.html">
            
                <a href="../PyGame/TopDownCodeAlong.html">
            
                    
                    Top-down Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../PyGame/PygameChallenges.html">
            
                <a href="../PyGame/PygameChallenges.html">
            
                    
                    Pygame Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Database/StudentDesc.html">
            
                <a href="../Database/StudentDesc.html">
            
                    
                    Week 8 - Database
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../Database/RestaurantReviewCodeAlong.html">
            
                <a href="../Database/RestaurantReviewCodeAlong.html">
            
                    
                    Restaurant Review Code-Along
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../Database/DatabaseChallenges.html">
            
                <a href="../Database/DatabaseChallenges.html">
            
                    
                    Database Challenges
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../FinalProject/StudentDesc.html">
            
                <a href="../FinalProject/StudentDesc.html">
            
                    
                    Week 9 - Final Project
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Discord Code-Along</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="discord-chat-bot">Discord Chat Bot</h1>
<p>In this activity, create a Discord chat bot that can respond to messages in a Discord server. How the chat bot responds and what it says is for you to decide! The chat bot could respond to common phrases, or respond to commands with useful features like rolling dice, posting pictures, or acting as a calculator.</p>
<h2 id="setting-up">Setting Up</h2>
<ol>
<li>Go to <a href="https://repl.it" target="_blank">repl.it</a></li>
<li>Log in</li>
<li>Fork the <a href="https://repl.it/@brebory/HyTechClub-Robot-Start" target="_blank">HyTechClub-Robot-Start repl</a></li>
<li>Make sure you have a Discord account so you can create and register your bot</li>
</ol>
<h2 id="creating-and-registering-the-bot">Creating and Registering the Bot</h2>
<p>The first step is to navigate to the <a href="https://discord.com/developers/applications" target="_blank">Discord Developer Portal</a>. You&apos;ll be prompted to log in, so use your Discord account that you created during set up.</p>
<ol>
<li>Make sure that you&apos;re on the Applications tab, and then click the blue &quot;New Application&quot; button in the top right</li>
<li>The &quot;Create An Application&quot; dialog will appear, so give your appliction a name, then click Create</li>
<li>You will be taken to your new application&apos;s General Information page. In the left-hand sidebar, click on &quot;Bot&quot;</li>
<li>On the Bot page, click the &quot;Add Bot&quot; button</li>
</ol>
<p>If you get an error about &quot;Too many users share this name&quot;, then you will need to change your application&apos;s name on the General Information page first, then try again with the new name.</p>
<h2 id="saving-the-bot-token-in-the-env-file">Saving the Bot Token in the .env File</h2>
<p>Repl.it has a special feature that allows you to create environment variables for your Repl application. In your Repl, create a new file called <code>.env</code>. In this plaintext file, you can create environment variables by making key-value pairs like this:</p>
<pre><code class="lang-text">ENVIRONMENT_VARIABLE_NAME=Value
ANOTHER_VARIABLE=anothervalue
</code></pre>
<p>Each environment variable should be on it&apos;s own line within this file.</p>
<ol>
<li>In the .env file, create a new variable called <code>DISCORD_BOT_SECRET</code></li>
<li>Back in the Discord Developer Portal, navigate to your bot&apos;s page, and find the &quot;Copy&quot; button for your bot&apos;s &quot;Token&quot;
<img src="discord-bot-settings-cropped.jpg" alt="Discord Bot Settings"></li>
<li>Click the copy button and paste the Bot Token into your Repl&apos;s <code>.env</code> file</li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-text">DISCORD_BOT_SECRET=ABCD.EFGHIJKLMNOPQR.STUVWXYZ
</code></pre>
<p>Your secret value should exactly match the value that you copied from your discord bot page.</p>
<h2 id="adding-the-bot-to-the-sandbox-server">Adding the Bot to the Sandbox Server</h2>
<ol>
<li>If you haven&apos;t already created a Discord account, you&apos;ll need to for this step</li>
<li>Join the <a href="https://discord.gg/7VUAKkHEvm" target="_blank">Hy-Tech Club Chat Bot Sandbox</a></li>
<li>In the <code>#welcome</code> channel, click the beaker reaction on MEE6&apos;s message to give yourself the Bot Tester role</li>
<li><p>Copy the &quot;Client ID&quot; from your Discord Application</p>
<p> <img src="discord-app-settings-cropped.jpg" alt="Discord Application Client ID"></p>
</li>
<li><p>Invite your bot to the Sandbox server by opening your bot&apos;s invite link in a browser. Use the following link format, but replace the <code>client_id</code> url parameter with your application&apos;s client id</p>
<p> <a href="https://discord.com/oauth2/authorize?client_id=xxxxxx&amp;scope=bot" target="_blank">https://discord.com/oauth2/authorize?client_id=xxxxxx&amp;scope=bot</a></p>
</li>
<li><p>Follow the prompts in the dialog to add your bot</p>
<p> <img src="discord-bot-add-to-server.jpg" alt="Discord Bot Invite"></p>
</li>
</ol>
<h2 id="testing-the-bot">Testing the Bot</h2>
<p>With the starter code from the Repl, your Bot Token in the <code>.env</code> file, and your bot added to the Hy-Tech Club Bot Testing Sandbox, you should now be able to run your Repl and see your bot successfully log in! Click the Run button at the top of the repl and you should see output similar to the following, except the username should match the username that you gave your bot. Additionally, in the list of users for the Hy-Tech Club Bot Testing Sandbox, your bot should appear as online.</p>
<pre><code class="lang-text">Logged in as: HyTechClub Robot#9248
Command prefix is: !
</code></pre>
<h2 id="using-the-discordpy-library">Using the discord.py Library</h2>
<p>For the rest of the lesson, we will be using the <a href="https://pypi.org/project/discord.py/" target="_blank">discord.py</a> library. <a href="https://repl.it" target="_blank">Repl.it</a> automatically handles downloading the library for you when you <code>import</code> it, thanks to the <a href="https://python-poetry.org" target="_blank">Poetry Package Manager</a>. When you run your Repl, you will see output similar to the following:</p>
<pre><code class="lang-text">Repl.it: Updating package configuration

--&gt; python3 -m poetry install
Installing dependencies from lock file


Package operations: 2 installs, 2 updates, 0 removals

  - Updating idna (2.10 -&gt; 3.1)
  - Updating chardet (4.0.0 -&gt; 3.0.4)
  - Installing discord.py (1.6.0)
  - Installing discord (1.0.1)
</code></pre>
<p>You will want to reference the <a href="https://discordpy.readthedocs.io/en/latest/" target="_blank">documentation for the discord.py library</a> while following this code-along, and you will also need to look up features from this library when completing the challenges for this lesson, so keep it open in another tab for reference.</p>
<h2 id="review-the-repls-starting-code">Review the Repl&apos;s Starting Code</h2>
<p>Let&apos;s break down the starting code from the <a href="https://repl.it/@brebory/HyTechClub-Robot-Start" target="_blank">HyTechClub-Robot-Start repl</a>. Take a look at the <strong>main.py</strong> file.</p>
<h3 id="imports-and-initialization">Imports and Initialization</h3>
<pre><code class="lang-py"><span class="hljs-keyword">from</span> discord.ext.commands <span class="hljs-keyword">import</span> Bot
<span class="hljs-keyword">import</span> os

bot = Bot(command_prefix = <span class="hljs-string">&quot;$&quot;</span>)
</code></pre>
<p>This code imports the <a href="https://discordpy.readthedocs.io/en/latest/ext/commands/api.html#bots" target="_blank"><code>Bot</code></a> class from the discord.ext.commands library, as well as the os package. Then, a new bot is created by calling the <code>Bot</code> constructor, providing a default <code>command_prefix</code>, and saving the result in the <code>bot</code> variable.</p>
<h3 id="the-onready-event">The on_ready Event</h3>
<p>Next, the starter code defines an <code>on_ready</code> event handler. Event handlers allow you to write code that executes in response to something that happens, also known as events. You can view a reference of all of the events supported by the <a href="https://pypi.org/project/discord.py/" target="_blank">discord.py</a> library <a href="https://discordpy.readthedocs.io/en/latest/api.html#event-reference" target="_blank">here</a>. In this code-along, we will focus on the <code>on_ready</code> and <code>on_message</code> events, but there are many other events your bot could handle.</p>
<pre><code class="lang-py"><span class="hljs-meta">@bot.event</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_ready</span><span class="hljs-params">()</span>:</span>
  print(<span class="hljs-string">&quot;Logged in as: {}&quot;</span>.format(bot.user))
  print(<span class="hljs-string">&quot;Command prefix is: {}&quot;</span>.format(bot.command_prefix))
</code></pre>
<p>This code registers the <code>on_ready</code> event for the <code>bot</code>, with a simple implementation that prints the bot&apos;s username and tag, as well as the command prefix when the bot starts. This is helpful to verify that the bot was able to start successfully.</p>
<p>Note that the <code>on_ready</code> function is <code>async</code>, which means that the function is a <a href="https://www.python.org/dev/peps/pep-0492" target="_blank">coroutine</a>. You don&apos;t need to understand all the details about coroutines - just know that making a function a codroutine allows it to be scheduled in an <em>event loop</em>. This allows your code to respond to real-time events.</p>
<p>All of the functions we create as event handlers must be defined as coroutines.</p>
<h3 id="starting-the-bot">Starting the Bot</h3>
<pre><code class="lang-py">token = os.environ.get(<span class="hljs-string">&quot;DISCORD_BOT_SECRET&quot;</span>)
bot.run(token)
</code></pre>
<p>This code reads the <code>DISCORD_BOT_SECRET</code> token you set up earlier as an environment variable (through <code>.env</code> file feature on Repl.it) using the <a href="https://docs.python.org/3/library/os.html#os.environ" target="_blank"><code>os.environ</code></a> dictionary. Then, it passes the token to the bot and runs it, which starts the bot and logs it in to Discord.</p>
<h2 id="responding-to-the-onmessage-event">Responding to the on_message Event</h2>
<p>The next step is to allow your bot to respond to messages in servers that it has joined. In order to accomplish this, you will use the <code>@bot.event</code> decorator. This decorator will take a function and add it to your bot as an &quot;event handler&quot;. The event that the handler responds to is drawn from the function name, so the function <code>on_message</code> will respond to the <a href="https://discordpy.readthedocs.io/en/latest/api.html#discord.on_message" target="_blank"><code>on_message</code></a> event.</p>
<ol>
<li>Define an async function called <code>on_message</code></li>
<li>Add the <code>@bot.event</code> decorator above your new <code>on_message</code> function</li>
<li>Add one parameter to your <code>on_message</code> function, called <code>message</code></li>
<li>For now, give your function an empty body, using the <code>pass</code> keyword</li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-py"><span class="hljs-meta">@bot.event</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_message</span><span class="hljs-params">(message)</span>:</span>
  <span class="hljs-keyword">pass</span>
</code></pre>
<h2 id="limiting-the-bots-responses">Limiting the Bot&apos;s Responses</h2>
<p>The first thing your bot should do is <em>not respond to other bots</em>. With all the other students working on bots at the same time, things could get a bit crazy if all the bots would respond to each other, or even themselves! You will achieve this by using properties from discord.py&apos;s <a href="https://discordpy.readthedocs.io/en/latest/api.html#message" target="_blank"><code>Message</code></a> and <a href="https://discordpy.readthedocs.io/en/latest/api.html#user" target="_blank"><code>User</code></a> classes. Specifically, the <code>message.author</code> property, and the <code>user.bot</code> property will allow you to verify whether or not a particular message was sent by a bot.</p>
<ol>
<li>Remove the <code>pass</code> keyword in your <code>on_message</code> function</li>
<li>Add an <code>if</code> statement inside the <code>on_message</code> function</li>
<li>As the condition for the if statement, check properties of the <code>message</code> parameter: <code>message.author.bot</code></li>
<li>Add the colon to denote the start of the <code>if</code> statement body</li>
<li>On the next line, add an empty <code>return</code></li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-py"><span class="hljs-meta">@bot.event</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_message</span><span class="hljs-params">(message)</span>:</span>
  <span class="hljs-keyword">if</span> message.author.bot:
    <span class="hljs-keyword">return</span>
</code></pre>
<h2 id="logging-received-messages">Logging Received Messages</h2>
<p>Currently, the <code>on_message</code> event handler doesn&apos;t have any visible side effects, so it&apos;s not easy to test if it&apos;s working correctly. Let&apos;s add a log message so we can tell when the bot is handling messages.</p>
<ol>
<li>Under the if statement within the <code>on_message</code> function, add a print statement</li>
<li>Print a message that logs both the <code>message.author</code> and <code>message.content</code> from the received message.</li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-py">print(<span class="hljs-string">&quot;Received message: {} &gt; {}&quot;</span>.format(message.author, message.content))
</code></pre>
<h2 id="adding-the-ping-pong-response">Adding the Ping Pong Response</h2>
<p>So, the bot currently writes to your Repl&apos;s console, but the whole point of the chat bot is to send messages in the Discord server! Let&apos;s get the bot to respond to a simple prompt. When anyone says &quot;ping&quot;, the bot should respond with &quot;pong&quot;. Or, if you&apos;re feeling creative, add any other simple call-and-response you want, like &quot;Marco&quot;, &quot;Polo&quot; or anything else you like.</p>
<ol>
<li>At the bottom of the <code>on_message</code> event handler, add another <code>if</code> statement</li>
<li>In the condition for the <code>if</code> statement, check if <code>message.content</code> equals your desired prompt</li>
<li>In the body for the <code>if</code>, respond to the prompt with your desired answer, using the <code>message.channel.send</code> method</li>
<li>Use the <code>await</code> keyword to wait for the bot to send the response</li>
</ol>
<p>Test out your code by posting the message <code>ping</code> in the Discord server&apos;s <strong>#general</strong> channel. Your bot should respond, and probably some of your classmate&apos;s bots will as well! Additionally, you should see messages logged in the console for your Repl for every message sent in the channel.</p>
<h3 id="code">Code</h3>
<pre><code class="lang-py"><span class="hljs-keyword">if</span> message.content == <span class="hljs-string">&quot;ping&quot;</span>
  <span class="hljs-keyword">await</span> message.channel.send(<span class="hljs-string">&quot;pong&quot;</span>)
</code></pre>
<h2 id="adding-more-prompts-and-responses">Adding More Prompts and Responses</h2>
<p>Now, if you wanted to add more prompts and responses to the bot, you could add more hard-coded <code>if</code> statements to get the job done, but what if your bot needs to respond to hundreds of phrases? Or what if you need to add more prompts and responses on-the-fly? Dictionaries can solve this problem! Next, add a dictionary of prompts and responses and allow your bot to respond in even more ways.</p>
<ol>
<li>At the top of the <strong>main.py</strong> file, right after the line that creates the <code>bot</code> variable, create a new variable called <code>prompts_and_responses</code></li>
<li>Set <code>prompts_and_responses</code> to a new dictionary <code>{}</code></li>
<li>Add pairs of prompt and response strings to the <code>prompts_and_responses</code> dictionary, at least 3</li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-py">prompts_and_responses = {
    <span class="hljs-string">&quot;hello&quot;</span>: <span class="hljs-string">&quot;Hello there!&quot;</span>,
    <span class="hljs-string">&quot;sup&quot;</span>: <span class="hljs-string">&quot;Hi, I&apos;m HyTechClub Robot!&quot;</span>,
    <span class="hljs-string">&quot;how are you?&quot;</span>: <span class="hljs-string">&quot;I am fine!&quot;</span>
}
</code></pre>
<h2 id="looping-over-the-prompts-and-response-dictionary">Looping Over the Prompts and Response Dictionary</h2>
<p>The <code>prompts_and_responses</code> dictionary can be used by the <code>on_message</code> event handler, which will make it much easier and faster to add new prompts and responses to your bot. By using the <code>keys</code> method of the dictionary, you can easily loop over all the prompts and search within the message content for those prompts.</p>
<ol>
<li>Find the bottom of the <code>on_message</code> function</li>
<li>Add a <code>for</code> loop that saves each key from <code>prompts_and_messages.keys()</code> in a variable called <code>prompt</code></li>
<li>Within the body of the <code>for</code>, add an <code>if</code> statement that checks if the <code>prompt</code> exists <code>in</code> the <code>message.content</code></li>
<li>If the <code>prompt</code> was found, print a message that reports that the <code>prompt</code> was found in the <code>message.content</code>.</li>
<li>If the <code>prompt</code> was found, <code>message.channel.send</code> the corresponding response from the <code>prompts_and_responses</code> dict, and <code>await</code> it</li>
</ol>
<h3 id="code">Code</h3>
<pre><code class="lang-py"><span class="hljs-keyword">for</span> prompt <span class="hljs-keyword">in</span> prompts_and_responses.keys():
  <span class="hljs-keyword">if</span> prompt <span class="hljs-keyword">in</span> message.content:
    print(<span class="hljs-string">&quot;Found prompt: {} in message {}&quot;</span>
      .format(prompt, message.content))
    <span class="hljs-keyword">await</span> message.channel.send(prompts_and_responses[prompt])
</code></pre>
<h2 id="testing-the-bot-again">Testing the Bot (Again)</h2>
<p>You can test your bot by writing messages that match your prompt in the #general channel in the Hy-Tech Club Chat Bot Sandbox server. If your bot shows as offline, it&apos;s possible that your Repl has timed out - if that&apos;s the case you may need to refresh your Repl and re-run it. Your bot should then show up as online again.</p>
<h2 id="final-code">Final Code</h2>
<pre><code class="lang-py"><span class="hljs-keyword">from</span> discord.ext.commands <span class="hljs-keyword">import</span> Bot
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> random

bot = Bot(command_prefix=<span class="hljs-string">&quot;$&quot;</span>)

prompts_and_responses = {
  <span class="hljs-string">&quot;hello&quot;</span>: <span class="hljs-string">&quot;Hello there!&quot;</span>,
  <span class="hljs-string">&quot;sup&quot;</span>: <span class="hljs-string">&quot;Hi, I&apos;m HyTechClub Robot!&quot;</span>,
  <span class="hljs-string">&quot;how are you?&quot;</span>: <span class="hljs-string">&quot;I am fine!&quot;</span>
}

<span class="hljs-meta">@bot.event</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_ready</span><span class="hljs-params">()</span>:</span>
  print(<span class="hljs-string">&quot;Logged in as: {}&quot;</span>.format(bot.user))
  print(<span class="hljs-string">&quot;Command prefix is: {}&quot;</span>.format(bot.command_prefix))

<span class="hljs-meta">@bot.event</span>
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">on_message</span><span class="hljs-params">(message)</span>:</span>
  <span class="hljs-keyword">if</span> message.author.bot:
    <span class="hljs-keyword">return</span>

  print(<span class="hljs-string">&quot;Received message: {} &gt; {}&quot;</span>.format(message.author, message.content))

  <span class="hljs-keyword">if</span> message.content == <span class="hljs-string">&quot;ping&quot;</span>:
    <span class="hljs-keyword">await</span> message.channel.send(<span class="hljs-string">&quot;pong&quot;</span>)

  <span class="hljs-keyword">for</span> prompt <span class="hljs-keyword">in</span> prompts_and_responses.keys():
    <span class="hljs-keyword">if</span> prompt <span class="hljs-keyword">in</span> message.content:
      print(<span class="hljs-string">&quot;Found prompt: {} in message {}&quot;</span>
        .format(prompt, message.content))
      <span class="hljs-keyword">await</span> message.channel.send(prompts_and_responses[prompt])

token = os.environ.get(<span class="hljs-string">&quot;DISCORD_BOT_SECRET&quot;</span>)
bot.run(token)
</code></pre>
<h2 id="challenges">Challenges</h2>
<p>After the activity, start working on the <a href="DiscordChallenges.html">Discord Bot Challenges</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="StudentDesc.html" class="navigation navigation-prev " aria-label="Previous page: Week 4 - Discord Bot">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="DiscordChallenges.html" class="navigation navigation-next " aria-label="Next page: Discord Challenges">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Discord Code-Along","level":"1.6.1","depth":2,"next":{"title":"Discord Challenges","level":"1.6.2","depth":2,"path":"DiscordBot/DiscordChallenges.md","ref":"DiscordBot/DiscordChallenges.md","articles":[]},"previous":{"title":"Week 4 - Discord Bot","level":"1.6","depth":1,"path":"DiscordBot/StudentDesc.md","ref":"DiscordBot/StudentDesc.md","articles":[{"title":"Discord Code-Along","level":"1.6.1","depth":2,"path":"DiscordBot/DiscordCodeAlong.md","ref":"DiscordBot/DiscordCodeAlong.md","articles":[]},{"title":"Discord Challenges","level":"1.6.2","depth":2,"path":"DiscordBot/DiscordChallenges.md","ref":"DiscordBot/DiscordChallenges.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toggle-chapters"],"pluginsConfig":{"toggle-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"BOOKREADME.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"DiscordBot/DiscordCodeAlong.md","mtime":"2021-04-15T19:55:00.760Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-04-15T19:55:40.997Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

